{% extends 'administrateur/action.html' %}
{% load static %}
{% load customfilter %}
{% block body %}
	<table class="accueil"><tr><td>Matière</td></tr></table>
	<form method="post">
	{% csrf_token %}
	<table class="tableausimple">
	{{ form.as_table }}
	<tr><td colspan="2"><input type="submit" value="Envoyer" name = "selectmatiere"/></td></tr>
	</table>
	</form>
	<table class="accueil">
	<tr>
		<td>Liste des colleurs</td>
		<td><a href="{% url 'ajout_colleur' %}">Ajouter des colleurs</a></td>
	</tr>
	</table>
	<form method="post">
	{% csrf_token %}
	<table class="tableausimple" id="suppr">
		<tr class="entete">
			<td>Sélectionner{{form2.colleur.errors}}</td>
			<td>Nom</td>
			<td>Prénom</td>
			<td>Identifiant</td>
			<td>Email</td>
			<td>Actif</td>
			<td>Grade</td>
			<td>Établissement</td>
			<td>Matière(s)</td>
			<td>Classe(s)</td>
			<td>Modifier</td>
			<td>Supprimer</td>
		</tr>
		{% for colleur,widget in form2.fields.colleur.queryset|tzip:form2.colleur %}
		<tr>
			<td>{{widget}}</td>
			<td>{{colleur.user.last_name|upper}}</td>
			<td>{{colleur.user.first_name|title}}</td>
			<td>{{colleur.user.username}}</td>
			<td>{{colleur.user.email}}</td>
			{% if colleur.user.is_active %}<td>✓</td> {% else %}<td style="color:red;">❌</td>{% endif %}
			<td>{{listegrades| lookup:colleur.grade}}</td>
			<td>{% with colleur.etablissement as etab %}{% if etab %}{{colleur.etablissement|title}}{% endif %}{% endwith %}</td>
			<td>{% for matiere in colleur.matieres.all %}{% if not forloop.first %}<br>{% endif %}{{matiere.nom|title}}{% endfor %}</td>
			<td>{% for classe in colleur.classes.all %}{% if not forloop.first %}<br>{% endif %}{{classe.nom}}{% endfor %}</td>
			<td><a class="bouton" href="{% url 'modif_colleur' colleur.pk %}">Modifier</a></td>
			<td><a class="bouton" href="{% url 'suppr_colleur' colleur.pk %}">Supprimer</a></td>
		</tr>
		{% endfor %}
		<tr class="plusclair">
			<td><label for = "check">Tout cocher</label><br/><input type="checkbox" id="check"/></td>
			<td colspan="5"><input type="submit" value="Supprimer la sélection" name="supprimer"/></td>
			<td colspan="6"><input type="submit" value="Modifier la sélection" name="modifier"/></td>
		</tr>
	</table>
	</form>
{% endblock %}
{% block javascript %}
<script type="text/javascript" src="{% static 'javascript/suppression.js' %}"></script>
<script type="text/javascript" src="{% static 'javascript/selection.js' %}"></script>
{% endblock %}